{
   "components": {
      "schemas": {
         "RegistrationRequest": {
            "required": ["email", "password", "username"],
            "type": "object",
            "properties": {
               "email": {
                  "type": "string",
                  "description": "User's email",
                  "format": "email"
               },
               "password": {
                  "type": "string",
                  "description": "User's password",
                  "example": "qwerty123"
               },
               "username": {
                  "type": "string",
                  "description": "User's name",
                  "example": "Emma"
               }
            }
         },
         "RegistrationResponse": {
            "type": "object",
            "properties": {
               "email": {
                  "type": "string",
                  "description": "User's email",
                  "format": "email"
               },
               "username": {
                  "type": "string",
                  "description": "User's name",
                  "example": "Emma"
               },
               "id": {
                  "type": "string",
                  "description": "User's id",
                  "example": "507f1f77bcf86cd799439011"
               }
            }
         },
         "LoginRequest": {
            "required": ["email", "password"],
            "type": "object",
            "properties": {
               "email": {
                  "type": "string",
                  "description": "User's email",
                  "format": "email"
               },
               "password": {
                  "type": "string",
                  "description": "User's password",
                  "example": "qwerty123"
               }
            }
         },
         "LoginResponse": {
            "type": "object",
            "properties": {
               "accessToken": {
                  "type": "string",
                  "description": "Session's access token (needed for all requests)",
                  "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1aWQiOiI1ZmMyMDg1YmQwOTM2NTI4MTA3Y2UyNzQiLCJzaWQiOiI1ZmMyZDJmY2UxZDIwNTA2NzAyYmRkMjIiLCJpYXQiOjE2MDY2MDM1MTYsImV4cCI6MTYwNjYwNzExNn0.rJ_QjU4KvA76H96RHsvOBChK0Vjbd0NmqjMxdQVJIXA"
               },
               "refreshToken": {
                  "type": "string",
                  "description": "Session's refresh token (needed for /auth/refresh)",
                  "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1aWQiOiI1ZmMyMDg1YmQwOTM2NTI4MTA3Y2UyNzQiLCJzaWQiOiI1ZmMyZDJmY2UxZDIwNTA2NzAyYmRkMjIiLCJpYXQiOjE2MDY2MDM1MTYsImV4cCI6MTYwNjYwNzExNn0.rJ_QjU4KvA76H96RHsvOBChK0Vjbd0NmqjMxdQVJIXB"
               },
               "sid": {
                  "type": "string",
                  "description": "Session's id (needed for /auth/refresh)",
                  "example": "507f1f77bcf86cd799439011"
               },
               "todaySummary": {
                  "type": "object",
                  "description": "Today's summary (could be empty if no summary for today exists)",
                  "properties": {
                     "date": {
                        "type": "string",
                        "description": "Day's date",
                        "example": "2020-12-31"
                     },
                     "kcalLeft": {
                        "type": "number",
                        "description": "Kcal left to consume",
                        "example": 1000
                     },
                     "kcalConsumed": {
                        "type": "number",
                        "description": "Kcal consumed",
                        "example": 1000
                     },
                     "dailyRate": {
                        "type": "number",
                        "description": "Daily rate in kcal",
                        "example": 2000
                     },
                     "percentsOfDailyRate": {
                        "type": "number",
                        "description": "Percents consumed of daily rate",
                        "example": 50
                     },
                     "userId": {
                        "type": "ObjectId",
                        "description": "User's id",
                        "example": "507f1f77bcf86cd799439011"
                     },
                     "id": {
                        "type": "ObjectId",
                        "description": "Day summary's id",
                        "example": "507f1f77bcf86cd799439012"
                     }
                  }
               },
               "user": {
                  "type": "object",
                  "description": "User's data",
                  "properties": {
                     "email": {
                        "type": "string",
                        "description": "User's email",
                        "format": "email"
                     },
                     "username": {
                        "type": "string",
                        "description": "User's name",
                        "example": "Emma"
                     },
                     "userData": {
                        "type": "object",
                        "description": "User's daily rate data",
                        "properties": {
                           "weight": {
                              "type": "number",
                              "description": "User's weight (kg)",
                              "minimum": 20,
                              "maximum": 500,
                              "example": 100
                           },
                           "height": {
                              "type": "number",
                              "description": "User's height (cm)",
                              "minimum": 100,
                              "maximum": 250,
                              "example": 170
                           },
                           "age": {
                              "type": "number",
                              "description": "User's age",
                              "minimum": 18,
                              "maximum": 100,
                              "example": 30
                           },
                           "bloodType": {
                              "type": "number",
                              "description": "User's blood type",
                              "enum": [1, 2, 3, 4]
                           },
                           "desiredWeight": {
                              "type": "number",
                              "description": "User's desired weight",
                              "minimum": 20,
                              "maximum": 500,
                              "example": 60
                           },
                           "dailyRate": {
                              "type": "string",
                              "description": "Your daily rate in kcal",
                              "example": 2000
                           },
                           "notAllowedProducts": {
                              "type": "array",
                              "description": "User's not allowed products (based on blood type)",
                              "items": {
                                 "type": "string",
                                 "description": "Not allowed product",
                                 "example": "Омлет"
                              }
                           }
                        }
                     },
                     "id": {
                        "type": "string",
                        "description": "User's id",
                        "example": "507f1f77bcf86cd799439011"
                     }
                  }
               }
            }
         },
         "RefreshTokensRequest": {
            "type": "object",
            "required": ["sid"],
            "properties": {
               "sid": {
                  "type": "string",
                  "description": "Session's id ('sid' field after authentication)",
                  "example": "507f1f77bcf86cd799439011"
               }
            }
         },
         "RefreshTokensResponse": {
            "type": "object",
            "properties": {
               "newAccessToken": {
                  "type": "string",
                  "description": "Access token",
                  "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1aWQiOiI1ZmMyMDg1YmQwOTM2NTI4MTA3Y2UyNzQiLCJzaWQiOiI1ZmMyZDJmY2UxZDIwNTA2NzAyYmRkMjIiLCJpYXQiOjE2MDY2MDM1MTYsImV4cCI6MTYwNjYwNzExNn0.rJ_QjU4KvA76H96RHsvOBChK0Vjbd0NmqjMxdQVJIXA"
               },
               "newRefreshToken": {
                  "type": "string",
                  "description": "Refresh token",
                  "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1aWQiOiI1ZmMyMDg1YmQwOTM2NTI4MTA3Y2UyNzQiLCJzaWQiOiI1ZmMyZDJmY2UxZDIwNTA2NzAyYmRkMjIiLCJpYXQiOjE2MDY2MDM1MTYsImV4cCI6MTYwNjYwNzExNn0.rJ_QjU4KvA76H96RHsvOBChK0Vjbd0NmqjMxdQVJIXB"
               },
               "sid": {
                  "type": "string",
                  "description": "New session's id",
                  "example": "507f1f77bcf86cd799439011"
               }
            }
         },
         "DailyRateRequest": {
            "required": ["weight", "height", "age", "desiredWeight", "bloodType"],
            "type": "object",
            "properties": {
               "weight": {
                  "type": "number",
                  "description": "User's weight (kg)",
                  "minimum": 20,
                  "maximum": 500,
                  "example": 100
               },
               "height": {
                  "type": "number",
                  "description": "User's height (cm)",
                  "minimum": 100,
                  "maximum": 250,
                  "example": 170
               },
               "age": {
                  "type": "number",
                  "description": "User's age",
                  "minimum": 18,
                  "maximum": 100,
                  "example": 30
               },
               "desiredWeight": {
                  "type": "number",
                  "description": "User's desired weight",
                  "minimum": 20,
                  "maximum": 500,
                  "example": 60
               },
               "bloodType": {
                  "type": "number",
                  "description": "User's blood type",
                  "enum": [1, 2, 3, 4]
               }
            }
         },
         "DailyRateResponse": {
            "type": "object",
            "properties": {
               "dailyRate": {
                  "type": "number",
                  "description": "Daily rate in kcal",
                  "example": 1351.5
               },
               "notAllowedProducts": {
                  "type": "array",
                  "items": {
                     "type": "string",
                     "description": "Not allowed product",
                     "example": ["Яйцо куриное (желток сухой)"]
                  }
               }
            }
         },
         "DailyRateWithUserIdResponse": {
            "type": "object",
            "properties": {
               "id": {
                  "type": "string",
                  "description": "User's id",
                  "example": "507f1f77bcf86cd799439011"
               },
               "dailyRate": {
                  "type": "number",
                  "description": "Daily rate in kcal",
                  "example": 1351.5
               },
               "summaries": {
                  "type": "array",
                  "items": {
                     "type": "object",
                     "description": "Updated summary",
                     "properties": {
                        "_id": {
                           "type": "string",
                           "description": "Day's id",
                           "example": "507f1f77bcf86cd799439012"
                        },
                        "date": {
                           "type": "string",
                           "description": "Day's date",
                           "example": "2020-12-31"
                        },
                        "kcalLeft": {
                           "type": "number",
                           "description": "Kcal left to consume",
                           "example": 1000
                        },
                        "kcalConsumed": {
                           "type": "number",
                           "description": "Kcal consumed",
                           "example": 1000
                        },
                        "dailyRate": {
                           "type": "number",
                           "description": "Daily rate in kcal",
                           "example": 2000
                        },
                        "percentsOfDailyRate": {
                           "type": "number",
                           "description": "Percents consumed of daily rate",
                           "example": 50
                        },
                        "userId": {
                           "type": "string",
                           "description": "User's id",
                           "example": "507f1f77bcf86cd799439013"
                        },
                        "__v": {
                           "type": "integer",
                           "description": "MongoDB document service versionKey (ignore)"
                        }
                     }
                  }
               },
               "notAllowedProducts": {
                  "type": "array",
                  "description": "User's not allowed products (based on blood type)",
                  "items": {
                     "type": "string",
                     "description": "Not allowed product",
                     "example": ["Яйцо куриное (желток сухой)"]
                  }
               }
            }
         },
         "ProductResponse": {
            "type": "array",
            "items": {
               "type": "object",
               "properties": {
                  "_id": {
                     "type": "string",
                     "description": "Product's id",
                     "example": "507f1f77bcf86cd799439011"
                  },
                  "categories": {
                     "type": "array",
                     "items": {
                        "type": "string",
                        "description": "Product's category",
                        "example": "яйца"
                     }
                  },
                  "weight": {
                     "type": "number",
                     "description": "Product's weight (100g)",
                     "example": 100
                  },
                  "title": {
                     "type": "object",
                     "description": "Product's russian and ukrainian titles",
                     "properties": {
                        "ru": {
                           "type": "string",
                           "example": "Меланж яичный"
                        },
                        "ua": {
                           "type": "string",
                           "example": "Меланж яєчний"
                        }
                     }
                  },
                  "calories": {
                     "type": "number",
                     "description": "Product's kcal for 100g",
                     "example": 157
                  },
                  "groupBloodNotAllowed": {
                     "type": "array",
                     "description": "Product's allowed/not allowed status on all blood types (first item is null - 0 index in array)",
                     "items": {
                        "oneOf": [{ "type": "null" }, { "type": "boolean" }]
                     },
                     "example": [null, true, false, false, false]
                  },
                  "__v": {
                     "type": "integer",
                     "description": "MongoDB document service versionKey (ignore)"
                  }
               }
            }
         },
         "PostDayRequest": {
            "type": "object",
            "required": ["date", "productId", "weight"],
            "properties": {
               "date": {
                  "type": "string",
                  "description": "Day's date",
                  "example": "2020-12-31"
               },
               "productId": {
                  "type": "string",
                  "description": "Product's id",
                  "example": "5d51694802b2373622ff552c"
               },
               "weight": {
                  "type": "number",
                  "description": "Product's weight",
                  "example": 100
               }
            }
         },
         "PostDayResponse": {
            "type": "object",
            "properties": {
               "eatenProduct": {
                  "type": "object",
                  "properties": {
                     "title": {
                        "type": "string",
                        "description": "Eaten product's description",
                        "example": "Меланж яичный"
                     },
                     "weight": {
                        "type": "number",
                        "description": "Eaten product's weight",
                        "example": 100
                     },
                     "kcal": {
                        "type": "number",
                        "description": "kcal consumed",
                        "example": 157
                     },
                     "id": {
                        "type": "string",
                        "description": "Eaten product's id",
                        "example": "9b1deb4d-3b7d-4bad-9bdd-2b0d7b3dcb6d"
                     }
                  }
               },
               "day": {
                  "type": "object",
                  "description": "Day (or newDay) when the product was eaten",
                  "properties": {
                     "id": {
                        "type": "string",
                        "description": "Day's id",
                        "example": "507f1f77bcf86cd799439011"
                     },
                     "eatenProducts": {
                        "type": "array",
                        "items": {
                           "type": "object",
                           "properties": {
                              "title": {
                                 "type": "string",
                                 "description": "Eaten product's description",
                                 "example": "Меланж яичный"
                              },
                              "weight": {
                                 "type": "number",
                                 "description": "Eaten product's weight",
                                 "example": 100
                              },
                              "kcal": {
                                 "type": "number",
                                 "description": "kcal consumed",
                                 "example": 157
                              },
                              "id": {
                                 "type": "string",
                                 "description": "Eaten product's id",
                                 "example": "9b1deb4d-3b7d-4bad-9bdd-2b0d7b3dcb6d"
                              }
                           }
                        }
                     },
                     "date": {
                        "type": "string",
                        "description": "Day's date",
                        "example": "2020-12-31"
                     },
                     "daySummary": {
                        "type": "ObjectId",
                        "description": "Id of the day's summary",
                        "example": "507f1f77bcf86cd799439011"
                     }
                  }
               },
               "daySummary": {
                  "type": "object",
                  "description": "Updated summary (or newSummary)",
                  "properties": {
                     "date": {
                        "type": "string",
                        "description": "Day's date",
                        "example": "2020-12-31"
                     },
                     "kcalLeft": {
                        "type": "number",
                        "description": "Kcal left to consume",
                        "example": 1194.5
                     },
                     "kcalConsumed": {
                        "type": "number",
                        "description": "Kcal consumed",
                        "example": 157
                     },
                     "dailyRate": {
                        "type": "number",
                        "description": "Daily rate in kcal",
                        "example": 1351.5
                     },
                     "percentsOfDailyRate": {
                        "type": "number",
                        "description": "Percents consumed of daily rate",
                        "example": 11.616722160562338
                     },
                     "userId": {
                        "type": "string",
                        "description": "User's id",
                        "example": "507f1f77bcf86cd799439012"
                     },
                     "id": {
                        "type": "string",
                        "description": "Day's id",
                        "example": "507f1f77bcf86cd799439011"
                     }
                  }
               }
            }
         },
         "DeleteDayRequest": {
            "type": "object",
            "required": ["dayId", "eatenProductId"],
            "properties": {
               "dayId": {
                  "type": "string",
                  "description": "Day's id",
                  "example": "507f1f77bcf86cd799439011"
               },
               "eatenProductId": {
                  "type": "string",
                  "description": "Eaten product's id",
                  "example": "9b1deb4d-3b7d-4bad-9bdd-2b0d7b3dcb6d"
               }
            }
         },
         "DeleteDayResponse": {
            "type": "object",
            "description": "Updated summary",
            "properties": {
               "date": {
                  "type": "string",
                  "description": "Day's date",
                  "example": "2020-12-31"
               },
               "kcalLeft": {
                  "type": "number",
                  "description": "Kcal left to consume",
                  "example": 1000
               },
               "kcalConsumed": {
                  "type": "number",
                  "description": "Kcal consumed",
                  "example": 1000
               },
               "dailyRate": {
                  "type": "number",
                  "description": "Daily rate in kcal",
                  "example": 2000
               },
               "percentsOfDailyRate": {
                  "type": "number",
                  "description": "Percents consumed of daily rate",
                  "example": 50
               },
               "userId": {
                  "type": "string",
                  "description": "User's id",
                  "example": "507f1f77bcf86cd799439011"
               },
               "id": {
                  "type": "string",
                  "description": "Day's id",
                  "example": "507f1f77bcf86cd799439012"
               }
            }
         },
         "GetDayRequest": {
            "type": "object",
            "required": ["date"],
            "properties": {
               "date": {
                  "type": "string",
                  "description": "Day's date",
                  "example": "2020-12-31"
               }
            }
         },
         "GetDayResponse": {
            "type": "object",
            "description": "Day (or newDay) when the product was eaten",
            "properties": {
               "id": {
                  "type": "string",
                  "description": "Day's id",
                  "example": "507f1f77bcf86cd799439011"
               },
               "eatenProducts": {
                  "type": "array",
                  "items": {
                     "type": "object",
                     "properties": {
                        "title": {
                           "type": "string",
                           "description": "Eaten product's description",
                           "example": "Меланж яичный"
                        },
                        "weight": {
                           "type": "number",
                           "description": "Eaten product's weight",
                           "example": 100
                        },
                        "kcal": {
                           "type": "number",
                           "description": "kcal consumed",
                           "example": 157
                        },
                        "id": {
                           "type": "string",
                           "description": "Eaten product's id",
                           "example": "9b1deb4d-3b7d-4bad-9bdd-2b0d7b3dcb6d"
                        }
                     }
                  }
               },
               "date": {
                  "type": "string",
                  "description": "Day's date",
                  "example": "2020-12-31"
               },
               "daySummary": {
                  "type": "object",
                  "description": "Day's summary",
                  "properties": {
                     "id": {
                        "type": "string",
                        "description": "Day's id",
                        "example": "507f1f77bcf86cd799439011"
                     },
                     "date": {
                        "type": "string",
                        "description": "Day's date",
                        "example": "2020-12-31"
                     },
                     "kcalLeft": {
                        "type": "number",
                        "description": "Kcal left to consume",
                        "example": 1194.5
                     },
                     "kcalConsumed": {
                        "type": "number",
                        "description": "Kcal consumed",
                        "example": 157
                     },
                     "dailyRate": {
                        "type": "number",
                        "description": "Daily rate in kcal",
                        "example": 1351.5
                     },
                     "percentsOfDailyRate": {
                        "type": "number",
                        "description": "Percents consumed of daily rate",
                        "example": 11.616722160562338
                     },
                     "userId": {
                        "type": "string",
                        "description": "User's id",
                        "example": "507f1f77bcf86cd799439012"
                     }
                  }
               }
            }
         },
         "GetUserInfo": {
            "type": "object",
            "description": "User's information",
            "properties": {
               "email": {
                  "type": "string",
                  "description": "User's email",
                  "format": "email"
               },
               "username": {
                  "type": "string",
                  "description": "User's name",
                  "example": "Emma"
               },
               "id": {
                  "type": "string",
                  "description": "User's id",
                  "example": "507f1f77bcf86cd799439011"
               },
               "userData": {
                  "type": "object",
                  "description": "User's daily rate data",
                  "properties": {
                     "weight": {
                        "type": "number",
                        "description": "User's weight (kg)",
                        "minimum": 20,
                        "maximum": 500,
                        "example": 100
                     },
                     "height": {
                        "type": "number",
                        "description": "User's height (cm)",
                        "minimum": 100,
                        "maximum": 250,
                        "example": 170
                     },
                     "age": {
                        "type": "number",
                        "description": "User's age",
                        "minimum": 18,
                        "maximum": 100,
                        "example": 30
                     },
                     "bloodType": {
                        "type": "number",
                        "description": "User's blood type",
                        "enum": [1, 2, 3, 4]
                     },
                     "desiredWeight": {
                        "type": "number",
                        "description": "User's desired weight",
                        "minimum": 20,
                        "maximum": 500,
                        "example": 60
                     },
                     "dailyRate": {
                        "type": "string",
                        "description": "Your daily rate in kcal",
                        "example": 2000
                     },
                     "notAllowedProducts": {
                        "type": "array",
                        "description": "User's not allowed products (based on blood type)",
                        "items": {
                           "type": "string",
                           "description": "Not allowed product",
                           "example": "Омлет"
                        }
                     }
                  }
               },
               "days": {
                  "type": "array",
                  "description": "Days array",
                  "items": {
                     "type": "object",
                     "description": "Day",
                     "properties": {
                        "_id": {
                           "type": "string",
                           "description": "Day's id",
                           "example": "507f1f77bcf86cd799439011"
                        },
                        "eatenProducts": {
                           "type": "array",
                           "items": {
                              "type": "object",
                              "properties": {
                                 "title": {
                                    "type": "string",
                                    "description": "Eaten product's description",
                                    "example": "Меланж яичный"
                                 },
                                 "weight": {
                                    "type": "number",
                                    "description": "Eaten product's weight",
                                    "example": 100
                                 },
                                 "kcal": {
                                    "type": "number",
                                    "description": "kcal consumed",
                                    "example": 157
                                 },
                                 "id": {
                                    "type": "string",
                                    "description": "Eaten product's id",
                                    "example": "9b1deb4d-3b7d-4bad-9bdd-2b0d7b3dcb6d"
                                 }
                              }
                           }
                        },
                        "date": {
                           "type": "string",
                           "description": "Day's date",
                           "example": "2020-12-31"
                        },
                        "__v": {
                           "type": "integer",
                           "description": "MongoDB document service versionKey (ignore)"
                        },
                        "daySummary": {
                           "type": "object",
                           "description": "Day's summary",
                           "properties": {
                              "date": {
                                 "type": "string",
                                 "description": "Day's date",
                                 "example": "2020-12-31"
                              },
                              "kcalLeft": {
                                 "type": "number",
                                 "description": "Kcal left to consume",
                                 "example": 1000
                              },
                              "kcalConsumed": {
                                 "type": "number",
                                 "description": "Kcal consumed",
                                 "example": 1000
                              },
                              "dailyRate": {
                                 "type": "number",
                                 "description": "Daily rate in kcal",
                                 "example": 2000
                              },
                              "percentsOfDailyRate": {
                                 "type": "number",
                                 "description": "Percents consumed of daily rate",
                                 "example": 50
                              },
                              "userId": {
                                 "type": "ObjectId",
                                 "description": "User's id",
                                 "example": "507f1f77bcf86cd799439011"
                              },
                              "_id": {
                                 "type": "ObjectId",
                                 "description": "Day summary's id",
                                 "example": "507f1f77bcf86cd799439012"
                              },
                              "__v": {
                                 "type": "integer",
                                 "description": "MongoDB document service versionKey (ignore)"
                              }
                           }
                        }
                     }
                  }
               }
            }
         }
      },
      "securitySchemes": {
         "Bearer": {
            "type": "http",
            "scheme": "bearer",
            "bearerFormat": "JWT"
         }
      }
   }
}
